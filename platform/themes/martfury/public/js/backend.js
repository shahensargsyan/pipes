!function(e){"use strict";e.ajaxSetup({headers:{"X-CSRF-TOKEN":e('meta[name="csrf-token"]').attr("content")}}),window.botbleCookieNewsletter=function(){var a="botble_cookie_newsletter",t=e("div[data-session-domain]").data("session-domain"),o=e("#subscribe"),s=o.data("time");function r(e){!function(e,a,o){var s=new Date;s.setTime(s.getTime()+24*o*60*60*1e3),document.cookie="botble_cookie_newsletter=1;expires="+s.toUTCString()+";domain="+t+";path=/"}(0,0,e)}function n(e){return-1!==document.cookie.split("; ").indexOf(e+"=1")}return n(a)||setTimeout((function(){o.length>0&&(o.addClass("active"),e("body").css("overflow","hidden"))}),s),{newsletterWithCookies:r,hideCookieDialog:function(){!n(a)&&e("#dont_show_again").is(":checked")?r(3):r(1/24)}}}();var a=function(e){window.showAlert("alert-danger",e)},t=function(t){void 0!==t.errors&&t.errors.length?o(t.errors):void 0!==t.responseJSON?void 0!==t.responseJSON.errors?422===t.status&&o(t.responseJSON.errors):void 0!==t.responseJSON.message?a(t.responseJSON.message):e.each(t.responseJSON,(function(t,o){e.each(o,(function(e,t){a(t)}))})):a(t.statusText)},o=function(t){var o="";e.each(t,(function(e,a){""!==o&&(o+="<br />"),o+=a})),a(o)};window.showAlert=function(a,t){if(a&&""!==t){var o=Math.floor(1e3*Math.random()),s='<div class="alert '.concat(a,' alert-dismissible" id="').concat(o,'">\n                            <span class="close icon-cross2" data-dismiss="alert" aria-label="close"></span>\n                            <i class="icon-')+("alert-success"===a?"checkmark-circle":"cross-circle")+' message-icon"></i>\n                            '.concat(t,"\n                        </div>");e("#alert-container").append(s).ready((function(){window.setTimeout((function(){e("#alert-container #".concat(o)).remove()}),6e3)}))}},e(document).ready((function(){window.onBeforeChangeSwatches=function(){e(".add-to-cart-form button[type=submit]").prop("disabled",!0).addClass("btn-disabled")},window.onChangeSwatchesSuccess=function(a){if(e(".add-to-cart-form .error-message").hide(),e(".add-to-cart-form .success-message").hide(),a.error)e(".add-to-cart-form button[type=submit]").prop("disabled",!0).addClass("btn-disabled"),e(".number-items-available").html('<span class="">('+a.message+")</span>").show(),e(".hidden-product-id").val("");else{e(".add-to-cart-form").find(".error-message").hide(),e(".Price-amount").text(a.data.display_sale_price),a.data.sale_price!==a.data.price?e(".was_price-amount").text(a.data.display_price).show():e(".ps-product__price del").hide(),e(".ps-product__specification #product-sku").text(a.data.sku),e(".hidden-product-id").val(a.data.id),e(".add-to-cart-form button[type=submit]").prop("disabled",!1).removeClass("btn-disabled"),e(".number-items-available").html('<span class="">('+a.message+")</span>").show();var t=e("#gallery-slider1 .gallery-slider__images>div");if(t.length){t.slick("unslick");var o="";a.data.image_with_sizes.origin.forEach((function(e){o+='<div class="item"><img src="'+e+'" alt="image"/></div>'})),t.html(o),t.slick({slidesToShow:t.data("item"),slidesToScroll:1,infinite:!1,arrows:t.data("arrow"),focusOnSelect:!0,prevArrow:"<a href='#'><i class='fa fa-angle-left'></i></a>",nextArrow:"<a href='#'><i class='fa fa-angle-right'></i></a>"})}var s=e(".ps-product--detail"),r=jQuery("#gallery-slider1 .gallery-slider__thumbnails>div"),n=s.find(".ps-product__thumbnail").data("vertical"),i=jQuery("#gallery-slider1 .gallery-slider__images>div");if(i.length){i.slick("unslick");var d="";a.data.image_with_sizes.origin.forEach((function(e){d+='<div class="item"><img src="'+e+'" alt="image"/></div>'})),i.html(d),i.slick({slidesToShow:1,slidesToScroll:1,asNavFor:".ps-product__variants",fade:!0,dots:!0,infinite:!1,arrows:i.data("arrow"),prevArrow:"<a href='#'><i class='fa fa-angle-left'></i></a>",nextArrow:"<a href='#'><i class='fa fa-angle-right'></i></a>"})}if(r.length){r.slick("unslick");var l="";a.data.image_with_sizes.thumb.forEach((function(e){l+='<div class="item"><img src="'+e+'" alt="image"/></div>'})),r.html(l),r.slick({slidesToShow:2,slidesToScroll:1,dots:!0,infinite:!1,arrows:r.data("arrow"),focusOnSelect:!0,prevArrow:"<a href='#'><i class='fa fa-angle-up'></i></a>",nextArrow:"<a href='#'><i class='fa fa-angle-down'></i></a>",asNavFor:"#gallery-slider1 .gallery-slider__images>div",vertical:n,responsive:[{breakpoint:1200,settings:{arrows:r.data("arrow"),slidesToShow:4,vertical:!1,prevArrow:"<a href='#'><i class='fa fa-angle-left'></i></a>",nextArrow:"<a href='#'><i class='fa fa-angle-right'></i></a>"}},{breakpoint:992,settings:{arrows:r.data("arrow"),slidesToShow:4,vertical:!1,prevArrow:"<a href='#'><i class='fa fa-angle-left'></i></a>",nextArrow:"<a href='#'><i class='fa fa-angle-right'></i></a>"}},{breakpoint:480,settings:{slidesToShow:3,vertical:!1,prevArrow:"<a href='#'><i class='fa fa-angle-left'></i></a>",nextArrow:"<a href='#'><i class='fa fa-angle-right'></i></a>"}}]})}e(window).trigger("resize"),s.length>0&&(s.find(".ps-product__gallery").data("lightGallery").destroy(!0),s.find(".ps-product__gallery").lightGallery({selector:".item a",thumbnail:!0,share:!1,fullScreen:!1,autoplay:!1,autoplayControls:!1,actualSize:!1}))}},e(document).on("change",".switch-currency",(function(){e(this).closest("form").submit()})),e(document).on("change",".product-filter-item",(function(){e(this).closest("form").submit()})),e(document).on("click",".add-to-cart-button",(function(a){a.preventDefault();var t=e(this);t.prop("disabled",!0).addClass("button-loading"),e.ajax({url:t.prop("href"),method:"POST",data:{id:t.data("id")},dataType:"json",success:function(a){if(t.prop("disabled",!1).removeClass("button-loading").addClass("active"),a.error)return window.showAlert("alert-danger",a.message),!1;window.showAlert("alert-success",a.message),"checkout"===t.prop("name")&&void 0!==a.data.next_url?window.location.href=a.data.next_url:e.ajax({url:window.siteUrl+"/ajax/cart",method:"GET",success:function(a){a.error||(e(".ps-cart--mobile").html(a.data.html),e(".btn-shopping-cart span i").text(a.data.count))}})},error:function(e){t.prop("disabled",!1).removeClass("button-loading"),window.showAlert("alert-danger",e.message)}})})),e(document).on("click",".remove-cart-item",(function(a){a.preventDefault();var t=e(this);t.closest(".ps-product--cart-mobile").addClass("content-loading"),e.ajax({url:t.prop("href"),method:"GET",success:function(a){if(t.closest(".ps-product--cart-mobile").removeClass("content-loading"),a.error)return window.showAlert("alert-danger",a.message),!1;e.ajax({url:window.siteUrl+"/ajax/cart",method:"GET",success:function(t){t.error||(e(".ps-cart--mobile").html(t.data.html),e(".btn-shopping-cart span i").text(t.data.count),window.showAlert("alert-success",a.message))}})},error:function(e){t.closest(".ps-product--cart-mobile").removeClass("content-loading"),window.showAlert("alert-danger",e.message)}})})),e(document).on("click","#buyNowBtn",(function(a){e(".add-to-cart-form button[type=submit]").click()})),e(document).on("click",".add-to-cart-form button[type=submit]",(function(a){a.preventDefault(),a.stopPropagation();var o=e(this);e(".hidden-product-id").val()?(o.prop("disabled",!0).addClass("btn-disabled").addClass("button-loading"),o.closest("form").find(".error-message").hide(),o.closest("form").find(".success-message").hide(),e.ajax({type:"POST",cache:!1,url:o.closest("form").prop("action"),data:new FormData(o.closest("form")[0]),contentType:!1,processData:!1,success:function(a){if(o.prop("disabled",!1).removeClass("btn-disabled").removeClass("button-loading"),a.error)return o.removeClass("button-loading"),window.showAlert("alert-danger",a.message),!1;dataLayer.push({ecommerce:null});var t=[];e.each(a.data.content,(function(e,a){console.log(a),t.push({name:a.name,id:a.id,price:a.price,brand:a.brand,category:a.category,variant:a.options.attributes,quantity:a.qty})})),dataLayer.push({event:"addToCart",ecommerce:{currencyCode:a.data.currencyCode,add:{products:t}}}),"checkout"===o.prop("name")&&void 0!==a.data.next_url?window.location.href=a.data.next_url:window.location.href="/cart"},error:function(e){o.prop("disabled",!1).removeClass("btn-disabled").removeClass("button-loading"),t(e,o.closest("form"))}})):o.prop("disabled",!0).addClass("btn-disabled")})),e(document).on("change",".submit-form-on-change",(function(){e(this).closest("form").submit()})),e(document).on("click",".form-review-product button[type=submit]",(function(o){var s=this;o.preventDefault(),o.stopPropagation(),e(this).prop("disabled",!0).addClass("btn-disabled").addClass("button-loading"),e.ajax({type:"POST",cache:!1,url:e(this).closest("form").prop("action"),data:new FormData(e(this).closest("form")[0]),contentType:!1,processData:!1,success:function(t){var o;t.error?a(t.message):(e(s).closest("form").find("select").val(0),e(s).closest("form").find("textarea").val(""),o=t.message,window.showAlert("alert-success",o),setTimeout((function(){window.location.reload()}),1500)),e(s).prop("disabled",!1).removeClass("btn-disabled").removeClass("button-loading")},error:function(a){e(s).prop("disabled",!1).removeClass("btn-disabled").removeClass("button-loading"),t(a,e(s).closest("form"))}})})),e(".form-coupon-wrapper .coupon-code").keypress((function(a){if(13===a.keyCode)return e(".apply-coupon-code").trigger("click"),a.preventDefault(),a.stopPropagation(),!1})),e(document).on("click",".btn-apply-coupon-code",(function(a){a.preventDefault();var t=e(a.currentTarget);t.prop("disabled",!0).addClass("btn-disabled").addClass("button-loading"),e.ajax({url:t.data("url"),type:"POST",data:{coupon_code:t.closest(".form-coupon-wrapper").find(".coupon-code").val()},headers:{"X-CSRF-TOKEN":e('meta[name="csrf-token"]').attr("content")},success:function(a){a.error?(window.showAlert("alert-danger",a.message),t.prop("disabled",!1).removeClass("btn-disabled").removeClass("button-loading")):e(".ps-section--shopping").load(window.location.href+"?applied_coupon=1 .ps-section--shopping > *",(function(){t.prop("disabled",!1).removeClass("btn-disabled").removeClass("button-loading"),window.showAlert("alert-success",a.message)}))},error:function(a){void 0!==a.responseJSON?"undefined"!==a.responseJSON.errors?e.each(a.responseJSON.errors,(function(a,t){e.each(t,(function(e,a){window.showAlert("alert-danger",a)}))})):void 0!==a.responseJSON.message&&window.showAlert("alert-danger",a.responseJSON.message):window.showAlert("alert-danger",a.status.text),t.prop("disabled",!1).removeClass("btn-disabled").removeClass("button-loading")}})})),e(document).on("click",".btn-remove-coupon-code",(function(a){a.preventDefault();var t=e(a.currentTarget),o=t.text();t.text(t.data("processing-text")),e.ajax({url:t.data("url"),type:"POST",headers:{"X-CSRF-TOKEN":e('meta[name="csrf-token"]').attr("content")},success:function(a){a.error?(window.showAlert("alert-danger",a.message),t.text(o)):e(".ps-section--shopping").load(window.location.href+" .ps-section--shopping > *",(function(){t.text(o)}))},error:function(a){void 0!==a.responseJSON?"undefined"!==a.responseJSON.errors?e.each(a.responseJSON.errors,(function(a,t){e.each(t,(function(e,a){window.showAlert("alert-danger",a)}))})):void 0!==a.responseJSON.message&&window.showAlert("alert-danger",a.responseJSON.message):window.showAlert("alert-danger",a.status.text),t.text(o)}})}))}))}(jQuery);
